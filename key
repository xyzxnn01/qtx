// Clear localStorage
localStorage.clear();

// Clear sessionStorage
sessionStorage.clear();

// Clear cookies
document.cookie.split(";").forEach(function(c) {
  document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
});

// Clear indexedDB (async operation)
function clearIndexedDB() {
  return new Promise((resolve) => {
    if ('indexedDB' in window) {
      const req = indexedDB.databases();
      req.onsuccess = function() {
        const databases = req.result;
        for (const db of databases) {
          indexedDB.deleteDatabase(db.name);
        }
        resolve();
      };
    } else {
      resolve();
    }
  });
}

// Clear cache storage (service workers)
async function clearCacheStorage() {
  if ('caches' in window) {
    const cacheNames = await caches.keys();
    await Promise.all(cacheNames.map(name => caches.delete(name)));
  }
}

// Clear all data
async function clearAllBrowserData() {
  try {
    await clearIndexedDB();
    await clearCacheStorage();
    
    // Force reload to ensure all changes take effect
    window.location.reload(true);
  } catch (error) {
    console.error("Error clearing browser data:", error);
  }
}

// Run the cleanup
clearAllBrowserData();
